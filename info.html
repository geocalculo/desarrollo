<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>GeoIPT - Reporte del punto consultado</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />

  <!-- Proj4 para convertir a UTM -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.9.2/proj4.js"></script>

  <!-- Tus estilos -->
  <link rel="stylesheet" href="css/info.css" />
</head>

<body>
  <div class="card">
    <h1>GeoIPT - Reporte del punto consultado</h1>
    <p class="subtitulo" id="subtitulo-instrumento"></p>

    <div id="mensaje"></div>

    <div id="contenido" style="display:none;">

      <!-- Encabezado con coordenadas / región / instrumento -->
      <div class="grid-header">
        <div>
          <h4>Coordenadas WGS84</h4>
          <div><span class="label">Lat:</span> <span id="wgs-lat"></span></div>
          <div><span class="label">Lon:</span> <span id="wgs-lon"></span></div>
        </div>
        <div>
          <h4>Coordenadas UTM (WGS84)</h4>
          <div><span class="label">Este:</span> <span id="utm-e"></span></div>
          <div><span class="label">Norte:</span> <span id="utm-n"></span></div>
          <div><span class="label">EPSG:</span> <span id="utm-epsg"></span></div>
        </div>
        <div>
          <h4>Región</h4>
          <div><span id="region-texto"></span></div>
        </div>
        <div>
          <h4>Instrumento(s) consultado(s)</h4>
          <div id="instrumentos-texto"></div>
        </div>
      </div>

      <h2>Mapa de referencia</h2>
      <p class="tip">
        Tip: puedes hacer clic nuevamente en este mapa para abrir un nuevo reporte.
      </p>
      <div id="map"></div>

      <!-- Lista de vértices -->
      <div id="vertices-poligono" style="margin-top:10px; font-size:0.85rem; color:#111827;"></div>

      <h2>Consulta PRC / SCC</h2>
      <p class="texto resultado-ok" id="texto-resultado"></p>
      <ul id="lista-coincidencias"></ul>

      <h2 id="titulo-detalle-poligono"></h2>
      <table id="tabla-zona"></table>

      <p class="nota">
        Nota: los atributos corresponden al polígono PRC/SCC que contiene el punto.
      </p>

      <h3>Instrumentos en pantalla</h3>
      <table id="tabla-lista">
        <thead>
          <tr>
            <th>Instrumento</th>
            <th>Tipo</th>
            <th>Comuna</th>
            <th>Match BBOX</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <div class="adjuntos">
        <strong>Documentos adjuntos:</strong>
        <ul>
          <li><a href="#" id="link-kml">Descargar KML de la zona consultada</a></li>
          <li><a href="#" id="link-json-zona">Descargar atributos de la zona (JSON)</a></li>
        </ul>
      </div>

      <a href="index.html" class="btn-volver">Volver al mapa</a>
    </div>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Tu lógica -->
  <script src="js/info.js"></script>
</body>
</html>
